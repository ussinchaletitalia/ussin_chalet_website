<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="../css/iphone-16-chalets.css">
    <link rel="stylesheet" href="../css/styleguide.css">
    <link rel="stylesheet" href="../css/globals.css">

    <!-- Load Google Maps API -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfmLbJ-Xc-oaIuoFs1NuPRB6FygUWCyY0&callback=initMap"></script>
    
    <script>
        function initMap() {
            if (typeof google === "undefined" || typeof google.maps === "undefined") {
                console.error("Google Maps API not loaded yet.");
                return;
            }

            console.log("Google Maps API is loaded. Initializing map...");
            const location = { lat: 45.853041, lng: 7.604977 };
            const map = new google.maps.Map(document.getElementById("map"), {
                center: location,
                zoom: 12,
                mapId: "roadmap",
            });

            new google.maps.Marker({
                position: location,
                map: map,
                title: "Our Chalet",
            });
        }
    </script>

    <style>
        /* Map styling */
        #map {
            width: 100%;
            max-width: 800px;
            height: 450px;
            margin: 20px auto;
            border-radius: 16px;
        }

        /* Airbnb Section */
        .airbnb-section {
            text-align: center;
            padding: 20px;
        }

        .airbnb-listing {
            margin-bottom: 30px;
        }

        iframe {
            width: 100%;
            height: 300px;
            border-radius: 10px;
        }
    </style>
</head>
<body style="margin: 0; background: #ffffff;">
    <input type="hidden" id="anPageName" value="iphone-16-chalets">

    <div class="menu-container">
        <button class="close-menu">✕</button>
        <ul>
            <li><a href="iphone-16-chalets.html#iphone-16-chalets">Our Chalets</a></li>
            <li><a href="iphone-16-contact-us.html">Contact Us</a></li>
        </ul>
    </div>

    <div class="iphone-16-chalets auto-animated screen" data-page="iphone-16-chalets">
        <div class="group-22-C61RwL">
            <div class="ussi-chalet_logo-1-VdQhAS"></div>
            <div class="authentic-alpine-living-VdQhAS">AUTHENTIC ALPINE LIVING</div>
        </div>

        <!-- Airbnb Listings Section -->
        <div class="airbnb-section">
            <h2>Our Chalets</h2>
            <div id="airbnb-listings"></div>
        </div>

        <!-- Map Section -->
        <div class="map-container">
            <h2>Our Location</h2>
            <div id="map"></div>
        </div>

        <!-- Contact Section -->
        <div class="contact-us">
            <h2>Contact Us</h2>
            <p>Email: <a href="mailto:ussinchalets@gmail.com">ussinchalets@gmail.com</a></p>
            <p>Phone: +39 0123 456789</p>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const chalets = [
                {
                    id: "979009583861992990",
                    title: "Chalet 1",
                    description: "Chalet · Valtournenche · ★4.67 · 1 bedroom · 1 bed · 1 bathroom",
                    url: "https://www.airbnb.it/rooms/979009583861992990"
                },
                {
                    id: "1189233581383934270",
                    title: "Chalet 2",
                    description: "Chalet · Valtournenche · ★4.75 · 2 bedrooms · 2 beds · 2 bathrooms",
                    url: "https://www.airbnb.it/rooms/1189233581383934270"
                }
            ];

            const airbnbContainer = document.getElementById("airbnb-listings");
            chalets.forEach(chalet => {
                airbnbContainer.innerHTML += `
                    <div class="airbnb-listing">
                        <h3>${chalet.title}</h3>
                        <iframe src="https://www.airbnb.it/embed/v1/listing/${chalet.id}" frameborder="0"></iframe>
                        <p>${chalet.description}</p>
                        <a href="${chalet.url}" target="_blank">View on Airbnb</a>
                    </div>
                `;
            });

            // Fix Airbnb iframes styling
            setTimeout(() => {
                document.querySelectorAll('.airbnb-listing iframe').forEach(iframe => {
                    iframe.style.objectFit = "contain";
                    iframe.style.overflow = "hidden";
                    iframe.style.transform = "none";
                });
            }, 3000);
        });

        // Menu toggle logic
        document.addEventListener("DOMContentLoaded", function () {
            const menu = document.querySelector(".menu-container");
            const menuButton = document.querySelector(".group-31-C61RwL");
            const closeButton = document.querySelector(".close-menu");

            if (menu && menuButton && closeButton) {
                menuButton.addEventListener("click", function (event) {
                    event.stopPropagation();
                    menu.style.display = "flex";
                });

                closeButton.addEventListener("click", function () {
                    menu.style.display = "none";
                });

                document.addEventListener("click", function (event) {
                    if (!menu.contains(event.target) && !menuButton.contains(event.target)) {
                        menu.style.display = "none";
                    }
                });
            }
        });
    </script>
</body>
</html>

